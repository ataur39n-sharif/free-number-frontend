import {
  FacebookIcon,
  FacebookShareButton,
  TelegramIcon,
  TelegramShareButton,
  TwitterIcon,
  TwitterShareButton
} from "next-share";
import Head from "next/head";
import FooterBottom from "../Components/Homepage/Footer/footer-bottom";
import FooterTop from "../Components/Homepage/Footer/footer-top";
import NumberList from "../Components/Homepage/NumberList";
import NoNumberList from "../Components/Homepage/NumberList/NoNumberList";
import TopDiv from "../Components/Homepage/TopDiv";

export default function Home({ data }) {

  return (
    <>
      <Head>
        <title>Free Number</title>
        <meta name="description" content="Generated by create next app" />
      </Head>
      <main style={{ minWidth: "18rem" }}>
        <section
          id="top_div"
          style={{ minHeight: "35vh" }}
          className="bg-dark text-light text-center d-flex justify-content-center align-items-center"
        >
          <TopDiv />
        </section>

        <section id="numberList">
          {data.status === "error" && <NoNumberList className="container" />}
          {data.status === "success" && (
            <NumberList value={data.values} className="container" />
          )}
        </section>
        <div className="social-share">
          <div className="icon-container">
            {/* facebook  */}
            <FacebookShareButton
              url={"https://github.com/next-share"}
              quote={
                "next-share is a social share buttons for your next React apps."
              }
              hashtag={"#nextshare"}
            >
              <FacebookIcon size={38} />
            </FacebookShareButton>
            {/* Twitter */}
            <TwitterShareButton
              url={"https://github.com/next-share"}
              title={
                "next-share is a social share buttons for your next React apps."
              }
            >
              <TwitterIcon size={38} />
            </TwitterShareButton>
            {/* telegram  */}
            <TelegramShareButton
              url={"https://github.com/next-share"}
              title={
                "next-share is a social share buttons for your next React apps."
              }
            >
              <TelegramIcon size={38} />
            </TelegramShareButton>
          </div>
        </div>
      </main>

      <section id="footer_section" className="mt-4 p-3 text-light">
        <FooterTop />
        <FooterBottom />
      </section>
    </>
  );
}

export async function getServerSideProps() {
  const result = await fetch(
    `${process.env.CURRENT_SITE_LINK}/api/getRentNumberList`
  );
  const value = await result.json();

  return {
    props: {
      data: value || null,
    },
  };
}
